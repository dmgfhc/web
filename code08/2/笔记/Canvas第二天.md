#

## 显示对象

“数据为本”，我们把要在屏幕上显示的部件所必须的数据放到一个对象中，然后用draw函数，根据对象的数据把对象绘制到屏幕上，用update函数，根据时间的变化来更新对象的数据。

显示对象就是这些内容的集合：{数据，绘制函数，更新函数}

## 专门用于做动画的定时器：requestAnimationFrame

用处：浏览器根据电脑的性能来决定下一帧什么时候绘制。

其实可以以这么理解：
它就是一个浏览器自动决定间隔时间的setTimeout。


### 梳理

1. 为什么要用定时器？
	1. 为了做动画，每一帧和上一帧都要一定的时间差，在这个时间差之内，显示在屏幕上的物体，要有一定的运动，然后这样就行够形成动画。
2. 用setInterval的问题？
	1. 它的定时在微观角度来说，是不准确的。
	2. 不准确造成误差，所以每一帧的移动的量不能是固定的
	3. 必须得通过 速度 * 间隔时间 来获得路程
3. 解决办法？
	1. 使用requestAnimationFrame
	2. 每一帧都去计算两帧间隔
	3. 在update里面用速度*间隔时间来获取移动的量

## 图片资源加载

如何保证所有图片加载完成之后，再执行主函数？

相关问题的提问。

Q 
你都说了是异步的
怎么可能是直接加到5呢?
应该是随时加载好随时减一吧

A
我创建图片标签不是异步的
图片标签做网络访问，图片加载是异步的
创建图片标签时直接加到了5代表有5张图正在加载。然后每有一张加载完成之后，就减去1，一直减到0

# FlappyBird

1. 多张图片的加载
2. 主循环
3. 小鸟的制作
	1. 绘制小鸟所需要的数据
		1. 自身的位置
			1. x
			2. y
			3. w
			4. h
		2. 图片资源和绘图上下文
			1. img
			2. ctx
		3. 帧动画相关
			1. currentIndex 当前帧的序号
			2. 在当前帧等待的时间
			3. animationArray 裁剪小图的方法
		4. 运动相关的数据
			1. a (加速度)
			2. speed
	2. draw
		1. ctx.drawImage
	3. update
		1. 帧动画
		2. 位置动画
			1. 加速运动：用加速度获取速度，用速度获取位移的路程
4.  管子的制作
	1. 需求
		1.  上管子最多露出350像素，最少露出100像素
		2.  管子从左侧移出屏幕，需要它从移到最右边
	2. 自身的数据
	3. update
	4. draw 


5. 碰撞检测API：isPointInPath
	1. isPointInPath(x,y)判断点是不是在路径的范围之内，返回布尔值

